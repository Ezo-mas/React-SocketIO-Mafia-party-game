{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kipra\\\\Desktop\\\\KTU\\\\React-SocketIO-Mafia-party-game\\\\client\\\\src\\\\components\\\\LobbyPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useEffect, useRef } from 'react';\nimport { useLocation, useParams, useNavigate } from 'react-router-dom';\nimport { LobbyContext } from '../context/LobbyContext';\nimport socket from '../services/socket';\nimport styles from './LobbyPage.module.css';\nimport Countdown, { zeroPad } from 'react-countdown';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LobbyPage = () => {\n  _s();\n  var _location$state;\n  // Router hooks\n  const {\n    roomId\n  } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const username = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.username) || 'Guest';\n\n  // Context hooks\n  const {\n    players,\n    addPlayer,\n    setPlayers,\n    host,\n    setRoomHost\n  } = useContext(LobbyContext);\n\n  // Player state\n  const [isReady, setIsReady] = useState(false);\n  const [readyPlayers, setReadyPlayers] = useState([]);\n  const [isHost, setIsHost] = useState(false);\n\n  // UI state\n  const [inviteLink, setInviteLink] = useState('');\n  const [copyStatus, setCopyStatus] = useState(null);\n  const [disabledKickButtons, setDisabledKickButtons] = useState({});\n  const [roomLocked, setRoomLocked] = useState(false);\n\n  // Timer state\n  const [lobbyStartTime, setLobbyStartTime] = useState(Date.now());\n  const [countdownDuration, setCountdownDuration] = useState(60000);\n\n  // Game settings state\n  const [gameSettings, setGameSettings] = useState({\n    dayDuration: 120,\n    nightDuration: 60,\n    mafiaPercentage: 30,\n    detectiveEnabled: true,\n    doctorEnabled: true,\n    civilianCount: 0\n  });\n\n  // refs to track current values\n  const playersRef = useRef(players);\n  const usernameRef = useRef(username);\n  const gameSettingsRef = useRef(gameSettings);\n\n  // refs updated with latest values\n  useEffect(() => {\n    playersRef.current = players;\n  }, [players]);\n  useEffect(() => {\n    gameSettingsRef.current = gameSettings;\n  }, [gameSettings]);\n  useEffect(() => {\n    usernameRef.current = username;\n  }, [username]);\n\n  // First effect - Room initialization\n  useEffect(() => {\n    var _location$state2;\n    if (!roomId) return;\n    setInviteLink(roomId);\n    const isUserHost = ((_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.isHost) || false;\n    setIsHost(isUserHost);\n    if (isUserHost && !host) {\n      setRoomHost(username);\n    }\n    socket.emit('join_room', roomId, username, isUserHost);\n    const updateTimer = setTimeout(() => {\n      socket.emit('get_room_players', roomId);\n    }, 500);\n    return () => {\n      clearTimeout(updateTimer);\n    };\n  }, [roomId, username, host, location.state, setRoomHost]);\n\n  // Main useEffect for socket events and room setup\n  useEffect(() => {\n    if (!roomId) return;\n    socket.emit('get_lobby_timer', roomId);\n\n    // Socket event handlers\n    const handleLobbyTimer = (startTime, duration) => {\n      setLobbyStartTime(startTime);\n      setCountdownDuration(duration);\n    };\n    const handleRoomPlayersList = (playersList, readyPlayersList) => {\n      if (process.env.NODE_ENV === 'development' && (players.length !== playersList.length || !players.every((player, i) => playersList[i] === player))) {\n        console.log(\"Players list updated:\", playersList);\n      }\n      setPlayers(playersList);\n      setReadyPlayers(readyPlayersList);\n    };\n    const handlePlayerJoined = newPlayer => {\n      if (!players.includes(newPlayer)) {\n        addPlayer(newPlayer);\n      }\n    };\n    const handlePlayerReady = readyPlayer => {\n      setReadyPlayers(prev => {\n        if (!prev.includes(readyPlayer)) {\n          return [...prev, readyPlayer];\n        }\n        return prev;\n      });\n    };\n    const handlePlayerNotReady = notReadyPlayer => {\n      setReadyPlayers(prev => prev.filter(player => player !== notReadyPlayer));\n    };\n    const handleGameStarted = () => {\n      navigate(`/game/${roomId}`, {\n        state: {\n          username: usernameRef.current,\n          gameSettings: gameSettingsRef.current\n        }\n      });\n    };\n    const handleYouWereKicked = () => {\n      alert(\"You have been kicked from the room.\");\n      navigate('/');\n    };\n    const handlePlayerKicked = kickedPlayer => {\n      console.log(`Player kicked: ${kickedPlayer}`);\n    };\n    const handleRoomLocked = () => setRoomLocked(true);\n    const handleRoomUnlocked = () => setRoomLocked(false);\n    const handleSettingsUpdated = newSettings => setGameSettings(newSettings);\n    socket.off('room_players_list');\n    socket.off('player_joined');\n    socket.off('player_ready');\n    socket.off('player_not_ready');\n    socket.off('game_started');\n    socket.off('room_locked');\n    socket.off('room_unlocked');\n    socket.off('settings_updated');\n    socket.off('lobby_timer');\n    socket.off('you_were_kicked');\n    socket.off('player_kicked');\n\n    // Register socket event listeners\n    socket.on('room_players_list', handleRoomPlayersList);\n    socket.on('player_joined', handlePlayerJoined);\n    socket.on('player_ready', handlePlayerReady);\n    socket.on('player_not_ready', handlePlayerNotReady);\n    socket.on('game_started', handleGameStarted);\n    socket.on('room_locked', handleRoomLocked);\n    socket.on('room_unlocked', handleRoomUnlocked);\n    socket.on('settings_updated', handleSettingsUpdated);\n    socket.on('lobby_timer', handleLobbyTimer);\n    socket.on('you_were_kicked', handleYouWereKicked);\n    socket.on('player_kicked', handlePlayerKicked);\n\n    // Cleanup socket listeners on component unmount\n    return () => {\n      socket.off('room_players_list', handleRoomPlayersList);\n      socket.off('player_joined', handlePlayerJoined);\n      socket.off('player_ready', handlePlayerReady);\n      socket.off('player_not_ready', handlePlayerNotReady);\n      socket.off('game_started', handleGameStarted);\n      socket.off('room_locked', handleRoomLocked);\n      socket.off('room_unlocked', handleRoomUnlocked);\n      socket.off('settings_updated', handleSettingsUpdated);\n      socket.off('lobby_timer', handleLobbyTimer);\n      socket.off('you_were_kicked', handleYouWereKicked);\n      socket.off('player_kicked', handlePlayerKicked);\n    };\n  }, [roomId, navigate, addPlayer]);\n\n  // Calculate civilian count based on other roles\n  useEffect(() => {\n    if (players.length > 0) {\n      const mafiaCount = Math.max(1, Math.floor(players.length * gameSettings.mafiaPercentage / 100));\n      let specialRoles = 0;\n      if (gameSettings.detectiveEnabled) specialRoles++;\n      if (gameSettings.doctorEnabled) specialRoles++;\n      const civCount = Math.max(0, players.length - mafiaCount - specialRoles);\n      setGameSettings(prev => ({\n        ...prev,\n        civilianCount: civCount\n      }));\n    }\n  }, [players.length, gameSettings.mafiaPercentage, gameSettings.detectiveEnabled, gameSettings.doctorEnabled]);\n\n  // Event handlers\n  const handleInvite = () => {\n    if (inviteLink) {\n      navigator.clipboard.writeText(inviteLink).then(() => {\n        setCopyStatus('success');\n        setTimeout(() => setCopyStatus(null), 3000);\n      }).catch(() => {\n        setCopyStatus('error');\n        setTimeout(() => setCopyStatus(null), 3000);\n      });\n    }\n  };\n  const handleStartGame = () => {\n    if (isHost && readyPlayers.length === players.length /*&& players.length >= 4 && players.length <= 12*/) {\n      socket.emit('start_game', roomId, gameSettings);\n      navigate(`/game/${roomId}`, {\n        state: {\n          username,\n          gameSettings\n        }\n      });\n    } else if (players.length < 4 || players.length > 12) {\n      alert('The number of players must be between 4 and 12 to start the game.');\n    } else if (readyPlayers.length !== players.length) {\n      alert('All players must be ready to start the game.');\n    }\n  };\n  const handleLockRoomToggle = () => {\n    if (isHost) {\n      socket.emit(roomLocked ? 'unlock_room' : 'lock_room', roomId);\n      setRoomLocked(!roomLocked);\n    }\n  };\n  const handleKickPlayer = playerToKick => {\n    if (isHost && playerToKick !== username) {\n      setDisabledKickButtons(prev => ({\n        ...prev,\n        [playerToKick]: true\n      }));\n      socket.emit('kick_player', roomId, playerToKick);\n      setTimeout(() => {\n        setDisabledKickButtons(prev => ({\n          ...prev,\n          [playerToKick]: false\n        }));\n      }, 2000);\n    }\n  };\n  const handleReadyToggle = () => {\n    setIsReady(!isReady);\n    socket.emit(!isReady ? 'player_ready' : 'player_not_ready', roomId, username);\n  };\n  const handleSettingChange = (setting, value) => {\n    const updatedSettings = {\n      ...gameSettings,\n      [setting]: value\n    };\n    setGameSettings(updatedSettings);\n    if (isHost) {\n      socket.emit('update_settings', roomId, updatedSettings);\n    }\n  };\n\n  // Helper variables\n  const allPlayersReady = players.length > 0 && readyPlayers.length === players.length;\n\n  // Countdown renderer\n  const renderer = ({\n    minutes,\n    seconds,\n    completed\n  }) => {\n    if (completed) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Time's up!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 14\n      }, this);\n    } else if (seconds <= 15 && minutes === 0) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: styles.countdownEnding,\n        children: [zeroPad(minutes), \":\", zeroPad(seconds)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [zeroPad(minutes), \":\", zeroPad(seconds)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles['main-container'],\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.content,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: styles.countdownTitle,\n        children: [\"Time left to buckle up:\", /*#__PURE__*/_jsxDEV(Countdown, {\n          date: lobbyStartTime + countdownDuration,\n          renderer: renderer,\n          className: styles.title,\n          onComplete: () => console.log(\"Countdown completed\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: styles.title,\n        children: [\"Welcome, \", username, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.inviteText,\n        children: \"Invite your friends to join the lobby:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: inviteLink,\n        readOnly: true,\n        className: styles.input\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleInvite,\n        className: styles.button,\n        children: \"Copy Room Code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this), copyStatus === 'success' && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.copySuccess,\n        children: \"Room code copied!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 38\n      }, this), copyStatus === 'error' && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.copyError,\n        children: \"Failed to copy.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 36\n      }, this), isHost && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.settingsPanel,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: styles.settingsTitle,\n          children: \"Game Settings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.settingRow,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Day Duration (seconds):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: \"60\",\n            max: \"300\",\n            value: gameSettings.dayDuration,\n            onChange: e => handleSettingChange('dayDuration', parseInt(e.target.value)),\n            disabled: !isHost || roomLocked,\n            className: styles.settingInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.settingRow,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Night Duration (seconds):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: \"30\",\n            max: \"180\",\n            value: gameSettings.nightDuration,\n            onChange: e => handleSettingChange('nightDuration', parseInt(e.target.value)),\n            disabled: !isHost || roomLocked,\n            className: styles.settingInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.settingRow,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Mafia Percentage:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"20\",\n            max: \"40\",\n            value: gameSettings.mafiaPercentage,\n            onChange: e => handleSettingChange('mafiaPercentage', parseInt(e.target.value)),\n            disabled: !isHost || roomLocked,\n            className: styles.settingSlider\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [gameSettings.mafiaPercentage, \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.settingRow,\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: gameSettings.detectiveEnabled,\n              onChange: e => handleSettingChange('detectiveEnabled', e.target.checked),\n              disabled: !isHost || roomLocked,\n              className: styles.settingCheckbox\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 17\n            }, this), \"Detective Role\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.settingRow,\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: gameSettings.doctorEnabled,\n              onChange: e => handleSettingChange('doctorEnabled', e.target.checked),\n              disabled: !isHost || roomLocked,\n              className: styles.settingCheckbox\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 17\n            }, this), \"Doctor Role\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.roleDistribution,\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Role Distribution (Estimated):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: [\"Mafia: \", Math.floor(players.length * gameSettings.mafiaPercentage / 100), \" players\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 17\n            }, this), gameSettings.detectiveEnabled && /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Detective: 1 player\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 51\n            }, this), gameSettings.doctorEnabled && /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Doctor: 1 player\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 48\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [\"Civilians: \", gameSettings.civilianCount, \" players\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 11\n      }, this), !isHost && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.settingsDisplay,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: styles.settingsTitle,\n          children: \"Game Settings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"Day Phase: \", gameSettings.dayDuration, \" seconds\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"Night Phase: \", gameSettings.nightDuration, \" seconds\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"Mafia: \", Math.floor(players.length * gameSettings.mafiaPercentage / 100), \" players\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 15\n          }, this), gameSettings.detectiveEnabled && /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Detective Role: Enabled\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 49\n          }, this), gameSettings.doctorEnabled && /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"Doctor Role: Enabled\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 46\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"Civilians: \", gameSettings.civilianCount, \" players\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.playersList,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: styles.playersTitle,\n          children: [\"Players in Lobby: \", players.length, \"/12\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: styles.playersUl,\n          children: players.map(player => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles['player-item'],\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles['player-info'],\n              children: [player, readyPlayers.includes(player) && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.readyTag,\n                children: \"Ready\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 17\n            }, this), isHost && player !== username && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleKickPlayer(player),\n              disabled: disabledKickButtons[player],\n              className: styles.kickButton,\n              \"data-player\": player,\n              children: \"Kick\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 19\n            }, this)]\n          }, player, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleReadyToggle,\n        className: isReady ? styles.notReadyButton : styles.readyButton,\n        disabled: roomLocked && !isReady,\n        children: isReady ? \"Not Ready\" : \"Ready\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 9\n      }, this), isHost && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleStartGame,\n          disabled: !allPlayersReady /*|| /*players.length < 4 || players.length > 12*/,\n          className: styles.startButton,\n          children: \"Start Game\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLockRoomToggle,\n          className: styles.lockButton,\n          children: roomLocked ? \"Unlock Room\" : \"Lock Room\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 306,\n    columnNumber: 5\n  }, this);\n};\n_s(LobbyPage, \"FcArWkcm4FZqA7Uc/+kyaabz75A=\", false, function () {\n  return [useParams, useLocation, useNavigate];\n});\n_c = LobbyPage;\nexport default LobbyPage;\nvar _c;\n$RefreshReg$(_c, \"LobbyPage\");","map":{"version":3,"names":["React","useContext","useState","useEffect","useRef","useLocation","useParams","useNavigate","LobbyContext","socket","styles","Countdown","zeroPad","jsxDEV","_jsxDEV","Fragment","_Fragment","LobbyPage","_s","_location$state","roomId","location","navigate","username","state","players","addPlayer","setPlayers","host","setRoomHost","isReady","setIsReady","readyPlayers","setReadyPlayers","isHost","setIsHost","inviteLink","setInviteLink","copyStatus","setCopyStatus","disabledKickButtons","setDisabledKickButtons","roomLocked","setRoomLocked","lobbyStartTime","setLobbyStartTime","Date","now","countdownDuration","setCountdownDuration","gameSettings","setGameSettings","dayDuration","nightDuration","mafiaPercentage","detectiveEnabled","doctorEnabled","civilianCount","playersRef","usernameRef","gameSettingsRef","current","_location$state2","isUserHost","emit","updateTimer","setTimeout","clearTimeout","handleLobbyTimer","startTime","duration","handleRoomPlayersList","playersList","readyPlayersList","process","env","NODE_ENV","length","every","player","i","console","log","handlePlayerJoined","newPlayer","includes","handlePlayerReady","readyPlayer","prev","handlePlayerNotReady","notReadyPlayer","filter","handleGameStarted","handleYouWereKicked","alert","handlePlayerKicked","kickedPlayer","handleRoomLocked","handleRoomUnlocked","handleSettingsUpdated","newSettings","off","on","mafiaCount","Math","max","floor","specialRoles","civCount","handleInvite","navigator","clipboard","writeText","then","catch","handleStartGame","handleLockRoomToggle","handleKickPlayer","playerToKick","handleReadyToggle","handleSettingChange","setting","value","updatedSettings","allPlayersReady","renderer","minutes","seconds","completed","children","fileName","_jsxFileName","lineNumber","columnNumber","className","countdownEnding","content","countdownTitle","date","title","onComplete","inviteText","type","readOnly","input","onClick","button","copySuccess","copyError","settingsPanel","settingsTitle","settingRow","min","onChange","e","parseInt","target","disabled","settingInput","settingSlider","checked","settingCheckbox","roleDistribution","settingsDisplay","playersTitle","playersUl","map","readyTag","kickButton","notReadyButton","readyButton","startButton","lockButton","_c","$RefreshReg$"],"sources":["C:/Users/kipra/Desktop/KTU/React-SocketIO-Mafia-party-game/client/src/components/LobbyPage.jsx"],"sourcesContent":["import React, { useContext, useState, useEffect, useRef } from 'react';\r\nimport { useLocation, useParams, useNavigate } from 'react-router-dom';\r\nimport { LobbyContext } from '../context/LobbyContext';\r\nimport socket from '../services/socket';\r\nimport styles from './LobbyPage.module.css';\r\nimport Countdown, { zeroPad } from 'react-countdown';\r\n\r\nconst LobbyPage = () => {\r\n  // Router hooks\r\n  const { roomId } = useParams();\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const username = location.state?.username || 'Guest';\r\n  \r\n  // Context hooks\r\n  const { players, addPlayer, setPlayers, host, setRoomHost } = useContext(LobbyContext);\r\n  \r\n  // Player state\r\n  const [isReady, setIsReady] = useState(false);\r\n  const [readyPlayers, setReadyPlayers] = useState([]);\r\n  const [isHost, setIsHost] = useState(false);\r\n  \r\n  // UI state\r\n  const [inviteLink, setInviteLink] = useState('');\r\n  const [copyStatus, setCopyStatus] = useState(null);\r\n  const [disabledKickButtons, setDisabledKickButtons] = useState({});\r\n  const [roomLocked, setRoomLocked] = useState(false);\r\n  \r\n  // Timer state\r\n  const [lobbyStartTime, setLobbyStartTime] = useState(Date.now());\r\n  const [countdownDuration, setCountdownDuration] = useState(60000);\r\n  \r\n  // Game settings state\r\n  const [gameSettings, setGameSettings] = useState({\r\n    dayDuration: 120,\r\n    nightDuration: 60,\r\n    mafiaPercentage: 30,\r\n    detectiveEnabled: true,\r\n    doctorEnabled: true,\r\n    civilianCount: 0,\r\n  });\r\n\r\n  // refs to track current values\r\n  const playersRef = useRef(players);\r\n  const usernameRef = useRef(username);\r\n  const gameSettingsRef = useRef(gameSettings);\r\n  \r\n  // refs updated with latest values\r\n  useEffect(() => {\r\n    playersRef.current = players;\r\n  }, [players]);\r\n  \r\n  useEffect(() => {\r\n    gameSettingsRef.current = gameSettings;\r\n  }, [gameSettings]);\r\n  \r\n  useEffect(() => {\r\n    usernameRef.current = username;\r\n  }, [username]);\r\n\r\n  \r\n  // First effect - Room initialization\r\n  useEffect(() => {\r\n    if (!roomId) return;\r\n    \r\n    setInviteLink(roomId);\r\n    const isUserHost = location.state?.isHost || false;\r\n    setIsHost(isUserHost);\r\n    \r\n    if (isUserHost && !host) {\r\n      setRoomHost(username);\r\n    }\r\n    \r\n    socket.emit('join_room', roomId, username, isUserHost);\r\n\r\n    const updateTimer = setTimeout(() => {  \r\n      socket.emit('get_room_players', roomId);\r\n    }, 500);\r\n    \r\n    return () => {\r\n      clearTimeout(updateTimer);\r\n    };\r\n    \r\n  }, [roomId, username, host, location.state, setRoomHost]);\r\n\r\n\r\n  // Main useEffect for socket events and room setup\r\n  useEffect(() => {\r\n    if (!roomId) return;\r\n    \r\n\r\n    socket.emit('get_lobby_timer', roomId);\r\n\r\n    // Socket event handlers\r\n    const handleLobbyTimer = (startTime, duration) => {\r\n      setLobbyStartTime(startTime);\r\n      setCountdownDuration(duration);\r\n    };\r\n\r\n    const handleRoomPlayersList = (playersList, readyPlayersList) => {\r\n      if (process.env.NODE_ENV === 'development' && \r\n          (players.length !== playersList.length || \r\n           !players.every((player, i) => playersList[i] === player))) {\r\n        console.log(\"Players list updated:\", playersList);\r\n      }\r\n      setPlayers(playersList);\r\n      setReadyPlayers(readyPlayersList);\r\n    };\r\n\r\n    const handlePlayerJoined = (newPlayer) => {\r\n      if (!players.includes(newPlayer)) {\r\n        addPlayer(newPlayer);\r\n      }\r\n    };\r\n\r\n    const handlePlayerReady = (readyPlayer) => {\r\n      setReadyPlayers(prev => {\r\n        if (!prev.includes(readyPlayer)) {\r\n          return [...prev, readyPlayer];\r\n        }\r\n        return prev;\r\n      });\r\n    };\r\n\r\n    const handlePlayerNotReady = (notReadyPlayer) => {\r\n      setReadyPlayers(prev => prev.filter(player => player !== notReadyPlayer));\r\n    };\r\n\r\n    const handleGameStarted = () => {\r\n      navigate(`/game/${roomId}`, { \r\n        state: { \r\n          username: usernameRef.current,\r\n          gameSettings: gameSettingsRef.current\r\n        } \r\n      });\r\n    };\r\n\r\n    const handleYouWereKicked = () => {\r\n      alert(\"You have been kicked from the room.\");\r\n      navigate('/');\r\n    };\r\n\r\n    const handlePlayerKicked = (kickedPlayer) => {\r\n      console.log(`Player kicked: ${kickedPlayer}`);\r\n    };\r\n\r\n    const handleRoomLocked = () => setRoomLocked(true);\r\n    const handleRoomUnlocked = () => setRoomLocked(false);\r\n    const handleSettingsUpdated = (newSettings) => setGameSettings(newSettings);\r\n\r\n    socket.off('room_players_list');\r\n    socket.off('player_joined');\r\n    socket.off('player_ready');\r\n    socket.off('player_not_ready');\r\n    socket.off('game_started');\r\n    socket.off('room_locked');\r\n    socket.off('room_unlocked');\r\n    socket.off('settings_updated');\r\n    socket.off('lobby_timer');\r\n    socket.off('you_were_kicked');\r\n    socket.off('player_kicked');\r\n\r\n    // Register socket event listeners\r\n    socket.on('room_players_list', handleRoomPlayersList);\r\n    socket.on('player_joined', handlePlayerJoined);\r\n    socket.on('player_ready', handlePlayerReady);\r\n    socket.on('player_not_ready', handlePlayerNotReady);\r\n    socket.on('game_started', handleGameStarted);\r\n    socket.on('room_locked', handleRoomLocked);\r\n    socket.on('room_unlocked', handleRoomUnlocked);\r\n    socket.on('settings_updated', handleSettingsUpdated);\r\n    socket.on('lobby_timer', handleLobbyTimer);\r\n    socket.on('you_were_kicked', handleYouWereKicked);\r\n    socket.on('player_kicked', handlePlayerKicked);\r\n\r\n    // Cleanup socket listeners on component unmount\r\n    return () => {\r\n      socket.off('room_players_list', handleRoomPlayersList);\r\n      socket.off('player_joined', handlePlayerJoined);\r\n      socket.off('player_ready', handlePlayerReady);\r\n      socket.off('player_not_ready', handlePlayerNotReady);\r\n      socket.off('game_started', handleGameStarted);\r\n      socket.off('room_locked', handleRoomLocked);\r\n      socket.off('room_unlocked', handleRoomUnlocked);\r\n      socket.off('settings_updated', handleSettingsUpdated);\r\n      socket.off('lobby_timer', handleLobbyTimer);\r\n      socket.off('you_were_kicked', handleYouWereKicked);\r\n      socket.off('player_kicked', handlePlayerKicked);\r\n    };\r\n  }, [roomId, navigate, addPlayer]);\r\n\r\n  // Calculate civilian count based on other roles\r\n  useEffect(() => {\r\n    if (players.length > 0) {\r\n      const mafiaCount = Math.max(1, Math.floor(players.length * gameSettings.mafiaPercentage / 100));\r\n      let specialRoles = 0;\r\n      if (gameSettings.detectiveEnabled) specialRoles++;\r\n      if (gameSettings.doctorEnabled) specialRoles++;\r\n      \r\n      const civCount = Math.max(0, players.length - mafiaCount - specialRoles);\r\n      \r\n      setGameSettings(prev => ({\r\n        ...prev,\r\n        civilianCount: civCount\r\n      }));\r\n    }\r\n  }, [players.length, gameSettings.mafiaPercentage, gameSettings.detectiveEnabled, gameSettings.doctorEnabled]);\r\n\r\n  // Event handlers\r\n  const handleInvite = () => {\r\n    if (inviteLink) {\r\n      navigator.clipboard.writeText(inviteLink)\r\n        .then(() => {\r\n          setCopyStatus('success');\r\n          setTimeout(() => setCopyStatus(null), 3000);\r\n        })\r\n        .catch(() => {\r\n          setCopyStatus('error');\r\n          setTimeout(() => setCopyStatus(null), 3000);\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleStartGame = () => {\r\n    if (isHost && readyPlayers.length === players.length /*&& players.length >= 4 && players.length <= 12*/) {\r\n      socket.emit('start_game', roomId, gameSettings);\r\n      navigate(`/game/${roomId}`, { \r\n        state: { \r\n          username,\r\n          gameSettings\r\n        } \r\n      });\r\n    } else if (players.length < 4 || players.length > 12) {\r\n      alert('The number of players must be between 4 and 12 to start the game.');\r\n    } else if (readyPlayers.length !== players.length) {\r\n      alert('All players must be ready to start the game.');\r\n    }\r\n  };\r\n\r\n  const handleLockRoomToggle = () => {\r\n    if (isHost) {\r\n      socket.emit(roomLocked ? 'unlock_room' : 'lock_room', roomId);\r\n      setRoomLocked(!roomLocked);\r\n    }\r\n  };\r\n\r\n  const handleKickPlayer = (playerToKick) => {\r\n    if (isHost && playerToKick !== username) {\r\n      setDisabledKickButtons(prev => ({\r\n        ...prev,\r\n        [playerToKick]: true\r\n      }));\r\n      \r\n      socket.emit('kick_player', roomId, playerToKick);\r\n      \r\n      setTimeout(() => {\r\n        setDisabledKickButtons(prev => ({\r\n          ...prev,\r\n          [playerToKick]: false\r\n        }));\r\n      }, 2000);\r\n    }\r\n  };\r\n\r\n  const handleReadyToggle = () => {\r\n    setIsReady(!isReady);\r\n    socket.emit(!isReady ? 'player_ready' : 'player_not_ready', roomId, username);\r\n  };\r\n\r\n  const handleSettingChange = (setting, value) => {\r\n    const updatedSettings = {\r\n      ...gameSettings,\r\n      [setting]: value\r\n    };\r\n    \r\n    setGameSettings(updatedSettings);\r\n    \r\n    if (isHost) {\r\n      socket.emit('update_settings', roomId, updatedSettings);\r\n    }\r\n  };\r\n\r\n  // Helper variables\r\n  const allPlayersReady = players.length > 0 && readyPlayers.length === players.length;\r\n\r\n  // Countdown renderer\r\n  const renderer = ({ minutes, seconds, completed }) => {\r\n    if (completed) {\r\n      return <span>Time's up!</span>;\r\n    } else if (seconds <= 15 && minutes === 0) {\r\n      return (\r\n        <span className={styles.countdownEnding}>\r\n          {zeroPad(minutes)}:{zeroPad(seconds)}\r\n        </span>\r\n      );\r\n    } else {\r\n      return (\r\n        <span>\r\n          {zeroPad(minutes)}:{zeroPad(seconds)}\r\n        </span>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles['main-container']}>\r\n      <div className={styles.content}>\r\n        {/* Countdown timer */}\r\n        <h1 className={styles.countdownTitle}>\r\n          Time left to buckle up: \r\n          <Countdown \r\n            date={lobbyStartTime + countdownDuration} \r\n            renderer={renderer} \r\n            className={styles.title}\r\n            onComplete={() => console.log(\"Countdown completed\")}\r\n          />\r\n        </h1>\r\n        \r\n        {/* Welcome message */}\r\n        <h2 className={styles.title}>Welcome, {username}!</h2>\r\n        \r\n        {/* Invite link section */}\r\n        <p className={styles.inviteText}>Invite your friends to join the lobby:</p>\r\n        <input\r\n          type=\"text\"\r\n          value={inviteLink}\r\n          readOnly\r\n          className={styles.input}\r\n        />\r\n        <button onClick={handleInvite} className={styles.button}>\r\n          Copy Room Code \r\n        </button>\r\n        {copyStatus === 'success' && <p className={styles.copySuccess}>Room code copied!</p>}\r\n        {copyStatus === 'error' && <p className={styles.copyError}>Failed to copy.</p>}\r\n        \r\n        {/* Game settings section - host view */}\r\n        {isHost && (\r\n          <div className={styles.settingsPanel}>\r\n            <h3 className={styles.settingsTitle}>Game Settings</h3>\r\n            \r\n            {/* Day duration */}\r\n            <div className={styles.settingRow}>\r\n              <label>Day Duration (seconds):</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"60\"\r\n                max=\"300\"\r\n                value={gameSettings.dayDuration}\r\n                onChange={(e) => handleSettingChange('dayDuration', parseInt(e.target.value))}\r\n                disabled={!isHost || roomLocked}\r\n                className={styles.settingInput}\r\n              />\r\n            </div>\r\n            \r\n            {/* Night duration */}\r\n            <div className={styles.settingRow}>\r\n              <label>Night Duration (seconds):</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"30\"\r\n                max=\"180\"\r\n                value={gameSettings.nightDuration}\r\n                onChange={(e) => handleSettingChange('nightDuration', parseInt(e.target.value))}\r\n                disabled={!isHost || roomLocked}\r\n                className={styles.settingInput}\r\n              />\r\n            </div>\r\n            \r\n            {/* Mafia percentage */}\r\n            <div className={styles.settingRow}>\r\n              <label>Mafia Percentage:</label>\r\n              <input\r\n                type=\"range\"\r\n                min=\"20\"\r\n                max=\"40\"\r\n                value={gameSettings.mafiaPercentage}\r\n                onChange={(e) => handleSettingChange('mafiaPercentage', parseInt(e.target.value))}\r\n                disabled={!isHost || roomLocked}\r\n                className={styles.settingSlider}\r\n              />\r\n              <span>{gameSettings.mafiaPercentage}%</span>\r\n            </div>\r\n            \r\n            {/* Detective role toggle */}\r\n            <div className={styles.settingRow}>\r\n              <label>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={gameSettings.detectiveEnabled}\r\n                  onChange={(e) => handleSettingChange('detectiveEnabled', e.target.checked)}\r\n                  disabled={!isHost || roomLocked}\r\n                  className={styles.settingCheckbox}\r\n                />\r\n                Detective Role\r\n              </label>\r\n            </div>\r\n            \r\n            {/* Doctor role toggle */}\r\n            <div className={styles.settingRow}>\r\n              <label>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={gameSettings.doctorEnabled}\r\n                  onChange={(e) => handleSettingChange('doctorEnabled', e.target.checked)}\r\n                  disabled={!isHost || roomLocked}\r\n                  className={styles.settingCheckbox}\r\n                />\r\n                Doctor Role\r\n              </label>\r\n            </div>\r\n            \r\n            {/* Role distribution */}\r\n            <div className={styles.roleDistribution}>\r\n              <h4>Role Distribution (Estimated):</h4>\r\n              <ul>\r\n                <li>Mafia: {Math.floor(players.length * gameSettings.mafiaPercentage / 100)} players</li>\r\n                {gameSettings.detectiveEnabled && <li>Detective: 1 player</li>}\r\n                {gameSettings.doctorEnabled && <li>Doctor: 1 player</li>}\r\n                <li>Civilians: {gameSettings.civilianCount} players</li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Game settings section - non-host view */}\r\n        {!isHost && (\r\n          <div className={styles.settingsDisplay}>\r\n            <h3 className={styles.settingsTitle}>Game Settings</h3>\r\n            <ul>\r\n              <li>Day Phase: {gameSettings.dayDuration} seconds</li>\r\n              <li>Night Phase: {gameSettings.nightDuration} seconds</li>\r\n              <li>Mafia: {Math.floor(players.length * gameSettings.mafiaPercentage / 100)} players</li>\r\n              {gameSettings.detectiveEnabled && <li>Detective Role: Enabled</li>}\r\n              {gameSettings.doctorEnabled && <li>Doctor Role: Enabled</li>}\r\n              <li>Civilians: {gameSettings.civilianCount} players</li>\r\n            </ul>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Players list */}\r\n        <div className={styles.playersList}>\r\n          <h3 className={styles.playersTitle}>Players in Lobby: {players.length}/12</h3>\r\n          <ul className={styles.playersUl}>\r\n            {players.map((player) => (\r\n              <div key={player} className={styles['player-item']}>\r\n                <div className={styles['player-info']}>\r\n                  {player} \r\n                  {readyPlayers.includes(player) && (\r\n                    <span className={styles.readyTag}>Ready</span>\r\n                  )}\r\n                </div>\r\n                {isHost && player !== username && (\r\n                  <button \r\n                    onClick={() => handleKickPlayer(player)}\r\n                    disabled={disabledKickButtons[player]}\r\n                    className={styles.kickButton}\r\n                    data-player={player}\r\n                  >\r\n                    Kick\r\n                  </button>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n        \r\n        {/* Ready button */}\r\n        <button\r\n          onClick={handleReadyToggle}\r\n          className={isReady ? styles.notReadyButton : styles.readyButton}\r\n          disabled={roomLocked && !isReady}\r\n        >\r\n          {isReady ? \"Not Ready\" : \"Ready\"}\r\n        </button>\r\n        \r\n        {/* Host-only controls */}\r\n        {isHost && (\r\n          <>\r\n            <button\r\n              onClick={handleStartGame}\r\n              disabled={!allPlayersReady /*|| /*players.length < 4 || players.length > 12*/}\r\n              className={styles.startButton}\r\n            >\r\n              Start Game\r\n            </button>\r\n            \r\n            <button \r\n              onClick={handleLockRoomToggle} \r\n              className={styles.lockButton}\r\n            >\r\n              {roomLocked ? \"Unlock Room\" : \"Lock Room\"}\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LobbyPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}