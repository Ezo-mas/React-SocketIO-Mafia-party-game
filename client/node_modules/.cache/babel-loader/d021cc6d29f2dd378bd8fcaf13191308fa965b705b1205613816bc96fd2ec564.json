{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kipra\\\\OneDrive - Kaunas University of Technology\\\\2_kursas_4semestras\\\\Programavimo_inzinerija\\\\MafiaRepo\\\\React-SocketIO-Mafia-party-game\\\\client\\\\src\\\\components\\\\LobbyPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useEffect } from 'react';\nimport { useLocation, useParams } from 'react-router-dom';\nimport { LobbyContext } from '../context/LobbyContext';\nimport { io } from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io(process.env.REACT_APP_SERVER_URL);\nconst LobbyPage = () => {\n  _s();\n  var _location$state;\n  const {\n    roomId\n  } = useParams();\n  const location = useLocation();\n  const username = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.username) || 'Guest';\n  const {\n    players,\n    addPlayer\n  } = useContext(LobbyContext);\n  const [inviteLink, setInviteLink] = useState('');\n  useEffect(() => {\n    console.log('useEffect triggered');\n    console.log('roomId:', roomId);\n    if (roomId) {\n      const link = `${roomId}`;\n      setInviteLink(link);\n      console.log('Invite link set:', link); // Debug log\n      socket.emit('join_room', roomId, username);\n      socket.on('player_joined', newPlayer => {\n        if (!players.includes(newPlayer)) {\n          addPlayer(newPlayer);\n        }\n      });\n      socket.on('game_started', () => {\n        alert('The game has started!');\n        // Add logic to transition to the game screen\n      });\n      //sss\n      return () => {\n        socket.off('player_joined');\n        socket.off('game_started');\n      };\n    }\n  }, [roomId, username, addPlayer, players]);\n  const handleInvite = () => {\n    console.log('handleInvite called');\n    console.log('inviteLink:', inviteLink);\n    if (inviteLink) {\n      navigator.clipboard.writeText(inviteLink).then(() => {\n        alert('Invite link copied to clipboard!');\n      }).catch(err => {\n        console.error('Failed to copy invite link:', err);\n        alert('Failed to copy invite link.');\n      });\n    } else {\n      alert('Invite link is not set.');\n    }\n  };\n  const handleStartLobby = () => {\n    if (players.length >= 4 && players.length <= 8) {\n      socket.emit('start_game', roomId);\n    } else {\n      alert('The number of players must be between 4 and 8 to start the game.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'center',\n      marginTop: '3rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Welcome, \", username, \"!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Invite your friends to join the lobby:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleInvite,\n      children: \"Copy Invite Link\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Players in Lobby:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: players.map((player, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: player\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleStartLobby,\n      disabled: players.length < 4 || players.length > 8,\n      children: \"Start Lobby\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(LobbyPage, \"Mx1pAieO4Mg6lY1ShlJJW7a+gYQ=\", false, function () {\n  return [useParams, useLocation];\n});\n_c = LobbyPage;\nexport default LobbyPage;\nvar _c;\n$RefreshReg$(_c, \"LobbyPage\");","map":{"version":3,"names":["React","useContext","useState","useEffect","useLocation","useParams","LobbyContext","io","jsxDEV","_jsxDEV","socket","process","env","REACT_APP_SERVER_URL","LobbyPage","_s","_location$state","roomId","location","username","state","players","addPlayer","inviteLink","setInviteLink","console","log","link","emit","on","newPlayer","includes","alert","off","handleInvite","navigator","clipboard","writeText","then","catch","err","error","handleStartLobby","length","style","textAlign","marginTop","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","player","index","disabled","_c","$RefreshReg$"],"sources":["C:/Users/kipra/OneDrive - Kaunas University of Technology/2_kursas_4semestras/Programavimo_inzinerija/MafiaRepo/React-SocketIO-Mafia-party-game/client/src/components/LobbyPage.jsx"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport { useLocation, useParams } from 'react-router-dom';\r\nimport { LobbyContext } from '../context/LobbyContext';\r\nimport { io } from 'socket.io-client';\r\n\r\nconst socket = io(process.env.REACT_APP_SERVER_URL);\r\n\r\nconst LobbyPage = () => {\r\n  const { roomId } = useParams();\r\n  const location = useLocation();\r\n  const username = location.state?.username || 'Guest';\r\n  const { players, addPlayer } = useContext(LobbyContext);\r\n  const [inviteLink, setInviteLink] = useState('');\r\n\r\n  useEffect(() => {\r\n    console.log('useEffect triggered');\r\n    console.log('roomId:', roomId);\r\n    if (roomId) {\r\n      const link = `${roomId}`;\r\n      setInviteLink(link);\r\n      console.log('Invite link set:', link); // Debug log\r\n      socket.emit('join_room', roomId, username);\r\n\r\n      socket.on('player_joined', (newPlayer) => {\r\n        if (!players.includes(newPlayer)) {\r\n          addPlayer(newPlayer);\r\n        }\r\n      });\r\n\r\n      socket.on('game_started', () => {\r\n        alert('The game has started!');\r\n        // Add logic to transition to the game screen\r\n      });\r\n//sss\r\n      return () => {\r\n        socket.off('player_joined');\r\n        socket.off('game_started');\r\n      };\r\n    }\r\n  }, [roomId, username, addPlayer, players]);\r\n\r\n  const handleInvite = () => {\r\n    console.log('handleInvite called');\r\n    console.log('inviteLink:', inviteLink);\r\n    if (inviteLink) {\r\n      navigator.clipboard.writeText(inviteLink).then(() => {\r\n        alert('Invite link copied to clipboard!');\r\n      }).catch((err) => {\r\n        console.error('Failed to copy invite link:', err);\r\n        alert('Failed to copy invite link.');\r\n      });\r\n    } else {\r\n      alert('Invite link is not set.');\r\n    }\r\n  };\r\n\r\n  const handleStartLobby = () => {\r\n    if (players.length >= 4 && players.length <= 8) {\r\n      socket.emit('start_game', roomId);\r\n    } else {\r\n      alert('The number of players must be between 4 and 8 to start the game.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center', marginTop: '3rem' }}>\r\n      <h2>Welcome, {username}!</h2>\r\n      <p>Invite your friends to join the lobby:</p>\r\n      <button onClick={handleInvite}>Copy Invite Link</button>\r\n      <div style={{ marginTop: '2rem' }}>\r\n        <h3>Players in Lobby:</h3>\r\n        <ul>\r\n          {players.map((player, index) => (\r\n            <li key={index}>{player}</li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n      <button onClick={handleStartLobby} disabled={players.length < 4 || players.length > 8}>\r\n        Start Lobby\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LobbyPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}